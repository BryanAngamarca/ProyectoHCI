<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
.ui{
 position:fixed;
 background:rgba(0,0,0,0.6);
 color:white;
 padding:10px;
 border-radius:10px;
 font-family:Arial;
 z-index:10;
}

#msg{top:10px;left:50%;transform:translateX(-50%);}
#score{bottom:10px;left:10px;}
#info{bottom:10px;right:10px;}
</style>
</head>

<body>

<div id="msg" class="ui">Apunta a la protoboard</div>
<div id="score" class="ui">‚≠ê0</div>
<div id="info" class="ui">üí° Usa resistencia para proteger LED</div>

<audio id="ok" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="bad" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>

<a-scene
 mindar-image="imageTargetSrc: targets.mind;"
 embedded
 vr-mode-ui="enabled:false"
 device-orientation-permission-ui="enabled:false"
>

<a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

<!-- ANCLA A LA PROTOBOARD -->
<a-entity mindar-image-target="targetIndex: 0">

 <!-- Protoboard virtual base -->
 <a-plane color="#e5e5e5" width="1.2" height="0.5" position="0 0 0"></a-plane>

 <!-- COMPONENTES -->
 <a-box id="battery" color="black" depth="0.05" height="0.1" width="0.2" position="-0.4 0.15 0"></a-box>

 <a-box id="resistor" color="#c69c6d" depth="0.05" height="0.05" width="0.25" position="0 0.15 0"></a-box>

 <a-sphere id="led" color="red" radius="0.07" position="0.4 0.15 0"></a-sphere>

</a-entity>
</a-scene>

<script>
let score=0;
let step=0;

const msg=document.getElementById("msg");
const scoreTxt=document.getElementById("score");
const info=document.getElementById("info");

const ok=document.getElementById("ok");
const bad=document.getElementById("bad");

const battery=document.querySelector("#battery");
const resistor=document.querySelector("#resistor");
const led=document.querySelector("#led");

function addClick(el,type){
 el.addEventListener("click",()=>{

  if(
   (step===0 && type==="battery") ||
   (step===1 && type==="resistor") ||
   (step===2 && type==="led")
  ){
    ok.play();
    score+=10;
    step++;

    msg.innerText="‚úî Correcto";
    info.innerText="üëç Conexi√≥n correcta";

    if(step===3){
      msg.innerText="üéâ Circuito completo";
      info.innerText="El LED enciende con corriente controlada";
      led.setAttribute("color","lime");
    }
  }
  else{
    bad.play();
    score-=5;
    msg.innerText="‚ùå Orden incorrecto";
    info.innerText="Bater√≠a ‚Üí Resistencia ‚Üí LED";

    setTimeout(()=>{
      msg.innerText="Sigue el orden correcto";
    },1500);
  }

  scoreTxt.innerText="‚≠ê"+score;
 });
}

addClick(battery,"battery");
addClick(resistor,"resistor");
addClick(led,"led");

</script>

</body>
</html>
