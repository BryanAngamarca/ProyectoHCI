<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AR Tutor de Circuitos</title>

<style>
body{
  margin:0;
  overflow:hidden;
  font-family: Arial;
}

#msg{
  position:absolute;
  top:10px;
  left:10px;
  color:white;
  background:rgba(0,0,0,0.5);
  padding:10px;
  border-radius:10px;
  font-size:18px;
}
</style>
</head>

<body>

<div id="msg">ðŸ“˜ Tutor AR iniciando...</div>

<video id="video" autoplay playsinline
style="position:absolute;width:100%;height:100%;object-fit:cover;"></video>

<canvas id="canvas"
style="position:absolute;top:0;left:0;"></canvas>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const msg = document.getElementById("msg");

let ledOn=false;
let showCurrent=false;

// ðŸ‘‰ CÃMARA TRASERA
navigator.mediaDevices.getUserMedia({
  video:{facingMode:"environment"}
})
.then(stream=>{
  video.srcObject=stream;
})
.catch(err=>{
  alert("Error cÃ¡mara: "+err);
});

// Ajustar tamaÃ±o
function resize(){
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
}
resize();
window.onresize=resize;

// Tap interacciÃ³n
document.addEventListener("click",()=>{
  ledOn=!ledOn;
  showCurrent=ledOn;
});

// IA educativa
function tutorIA(){
  if(!ledOn)
    return "ðŸ’¡ Consejo: Cierra el circuito para encender el LED";
  else
    return "âœ… Bien! La resistencia protege al LED";
}

// Dibujar protoboard
function protoboard(){
  ctx.strokeStyle="white";
  ctx.lineWidth=4;
  ctx.strokeRect(40,220,330,180);

  // puntos
  for(let i=0;i<10;i++){
    for(let j=0;j<4;j++){
      ctx.fillStyle="gray";
      ctx.beginPath();
      ctx.arc(60+i*30,240+j*35,3,0,Math.PI*2);
      ctx.fill();
    }
  }
}

// Dibujar corriente
function corriente(){
  if(!showCurrent) return;

  ctx.strokeStyle="lime";
  ctx.lineWidth=4;
  ctx.beginPath();
  ctx.moveTo(140,290);
  ctx.lineTo(220,290);
  ctx.stroke();
}

// Dibujo AR
function draw(){

  ctx.clearRect(0,0,canvas.width,canvas.height);

  protoboard();

  // LED
  ctx.fillStyle=ledOn?"lime":"red";
  ctx.beginPath();
  ctx.arc(120,290,18,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="white";
  ctx.fillText("LED",100,260);

  // Resistencia
  ctx.fillStyle="yellow";
  ctx.fillRect(200,280,70,20);
  ctx.fillStyle="black";
  ctx.fillText("220Î©",205,275);

  corriente();

  msg.innerText=tutorIA();

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
