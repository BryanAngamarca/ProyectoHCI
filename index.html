<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AR Tutor Circuitos</title>
</head>

<body style="margin:0; overflow:hidden;">

<video id="video" autoplay playsinline 
style="position:absolute; width:100%; height:100%; object-fit:cover;">
</video>

<canvas id="canvas" 
style="position:absolute; top:0; left:0;">
</canvas>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let ledOn = false;

// Cámara
navigator.mediaDevices.getUserMedia({video:true})
.then(stream => video.srcObject = stream);

// Ajustar tamaño
function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.onresize = resize;

// Tap para encender LED
document.addEventListener("click", ()=>{
  ledOn = !ledOn;
});

// IA simple
function analyze(){
  return ledOn ? 
    "✅ Circuito Correcto" :
    "⚠️ LED Apagado";
}

// Dibujar AR
function draw(){

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Protoboard
  ctx.strokeStyle="white";
  ctx.lineWidth=4;
  ctx.strokeRect(50,200,300,150);

  // LED
  ctx.fillStyle = ledOn ? "lime" : "red";
  ctx.beginPath();
  ctx.arc(120,270,20,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="white";
  ctx.font="18px Arial";
  ctx.fillText("LED",100,240);

  // Resistencia
  ctx.fillStyle="yellow";
  ctx.fillRect(200,250,80,20);
  ctx.fillStyle="black";
  ctx.fillText("R",235,245);

  // Texto IA
  ctx.fillStyle="cyan";
  ctx.font="24px Arial";
  ctx.fillText(analyze(),50,100);

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
